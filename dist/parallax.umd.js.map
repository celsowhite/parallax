{"version":3,"file":"parallax.umd.js","sources":["../src/parallax.js"],"sourcesContent":["/*----------------------\nImports\n----------------------*/\n\nimport elementInView from '@celsowhite/element-in-view';\n\n/*----------------------\nElement In View\n----------------------*/\n\nexport default function parallax(elementSelector) {\n\n    const parallaxItems = document.querySelectorAll(elementSelector);\n\n    const windowHeight = window.innerHeight;\n    \n    /*----------------------\n    Check Parallax Items\n    ---\n    On scroll check the position of an item and if in view then parallax it based on the speed and rotate settings\n    ----------------------*/\n\n    function checkParallaxItems() {\n\n        Array.from(parallaxItems).forEach(item => {\n\n            // If item is in view then parallax it at the given speed/rotation\n\n            if (elementInView(item, 'bottom')) {\n\n                // User configurations for speed and rotation\n\n                let speed = Number(item.dataset.speed);\n\n                let rotate = Number(item.dataset.rotate);\n\n                // Calculate the percentage the item has scrolled within the viewport\n                // If item was already in viewport then subtract its base so we have an origin for the scroll effects\n\n                let percentage = (windowHeight - item.getBoundingClientRect().top) / (windowHeight + item.clientHeight) - item.base;\n\n                // Adjust the vertical position by the speed factor while the item is in the viewport.\n                // Taking the negative of the speed that was entered so the element moves in the direction the user desired. (positive speed is a negative translate Y).\n\n                let position = -Math.round((speed * (percentage * 100)));\n\n                // Rotate a specific amount of degrees while the item is in the viewport\n\n                let degrees = Math.round((rotate / 100) * (percentage * 100));\n\n                // Check which data attributes the user has set so we apply the right style attributes.\n\n                if (rotate && speed) {\n                    item.style.transform = 'translate3d(0,' + position + 'px, 0) rotate(' + degrees + 'deg)';\n                } \n                else if (rotate) {\n                    item.style.transform = 'rotate(' + degrees + 'deg)';\n                } \n                else if (speed) {\n                    item.style.transform = 'translate3d(0,' + position + 'px, 0)';\n                }\n\n            }\n\n        });\n\n    }\n\n    /*----------------------\n    Init\n    ----------------------*/\n\n    if(parallaxItems.length) {\n\n        /*----------------------\n        Initial Position Check\n        ---\n        Check each item to see if it is in view on page load so we can set a base position\n        ----------------------*/\n\n        Array.from(parallaxItems).forEach(item => {\n\n            if (item.getBoundingClientRect().bottom < windowHeight) {\n                item.base = (-item.getBoundingClientRect().top + windowHeight) / (item.clientHeight + windowHeight);\n            } else {\n                item.base = 0;\n            }\n\n        });\n\n        /*----------------------\n        Scroll Event\n        ----------------------*/\n\n        window.addEventListener('scroll', function () {\n\n            // Ensure the browser repaints before running each animation\n\n            window.requestAnimationFrame(checkParallaxItems);\n\n        });\n\n    }\n\n}"],"names":["elementSelector","parallaxItems","document","querySelectorAll","windowHeight","window","innerHeight","checkParallaxItems","Array","from","forEach","item","elementInView","speed","Number","dataset","rotate","percentage","getBoundingClientRect","top","clientHeight","base","position","Math","round","degrees","style","transform","length","bottom","addEventListener","requestAnimationFrame"],"mappings":"iTAUe,SAAkBA,OAEvBC,EAAgBC,SAASC,iBAAiBH,GAE1CI,EAAeC,OAAOC,qBAQnBC,IAELC,MAAMC,KAAKR,GAAeS,iBAAQC,MAI1BC,EAAcD,EAAM,UAAW,KAI3BE,EAAQC,OAAOH,EAAKI,QAAQF,OAE5BG,EAASF,OAAOH,EAAKI,QAAQC,QAK7BC,GAAcb,EAAeO,EAAKO,wBAAwBC,MAAQf,EAAeO,EAAKS,cAAgBT,EAAKU,KAK3GC,GAAYC,KAAKC,MAAOX,GAAsB,IAAbI,IAIjCQ,EAAUF,KAAKC,MAAOR,EAAS,KAAqB,IAAbC,IAIvCD,GAAUH,EACVF,EAAKe,MAAMC,UAAY,iBAAmBL,EAAW,iBAAmBG,EAAU,OAE7ET,EACLL,EAAKe,MAAMC,UAAY,UAAYF,EAAU,OAExCZ,IACLF,EAAKe,MAAMC,UAAY,iBAAmBL,EAAW,aAalErB,EAAc2B,SAQbpB,MAAMC,KAAKR,GAAeS,iBAAQC,GAG1BA,EAAKU,KADLV,EAAKO,wBAAwBW,OAASzB,IACxBO,EAAKO,wBAAwBC,IAAMf,IAAiBO,EAAKS,aAAehB,GAE1E,IASpBC,OAAOyB,iBAAiB,SAAU,WAI9BzB,OAAO0B,sBAAsBxB"}